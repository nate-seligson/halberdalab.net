function cal=OurScreenCalibrations(screen,const)
% cal=OurScreenCalibrations(screen)
% This holds our screen calibrations. Please use CalibrateScreenLuminance
% to add data for your screen to this file. If you'll send the resulting
% file to me, I'll add your screen calibration to the master copy of
% OurScreenCalibrations.m, so you can use the master copy of the software.
% Denis Pelli, March 24, 2015, July 28, 2015.
%
% 1. WE SAVE THE GAMMA TABLE TO RESTORE THE CLUT. Apple offers no easy way
% to grab the default screen profile; for Mac users, it's called a color
% profile; for programmers it's called a gamma table. It's meant to be
% loaded into your screen's color lookup table (CLUT).
% CalibrateScreenLuminance uses AppleScript to control System
% Preferences:Displays:Color to load the default gamma table into your
% CLUT, and then we save it here in cal.old.gamma. This is much more
% convenient than using AppleScript to get it yourself because running
% AppleScript is slow (many seconds if Screen Preference is not already
% open) and fragile, requiring special permissions. It is useful to have
% this table handy. Most users of OurScreenCalibrations will modify the
% CLUT. Once you've modified the CLUT, neither macOS nor Psychtoolbox
% automatically restore the default CLUT. It is automatically restored only
% when you reboot the computer. It turns out to be hard to reliably save
% and restore the CLUT because, during development, it's common for a
% program to terminate prematurely without having restored the original
% CLUT. The next program you run then risks saving and restoring the
% modified CLUT. Thus it's more reliable to have a known good copy here, in
% cal.old.gamma, that you can use to restore the CLUT when your program is
% done. Just call Screen('LoadNormalizedGammaTable',0,cal.old.gamma). For
% general use of LoadNormalizedGammaTable, you would normally worry about
% the deferLoading argument and use PsychImaging to EnableCLUTMapping, but
% for just restoring the default, I've had good luck with this basic call.
%
% 2. WE SAVE THE GAMMA TABLE TO GET WHITE RIGHT. On most displays, the
% default gamma table adjusts the values of the blue and red channels to
% achieve a consistent chroma at every luminance. My program LinearizeClut
% uses that, once it's picked the luminance by the associated green channel
% gamma value by doing a table lookup into cal.old.gamma to find the
% appropriate values for red and blue gamma. Thus all the displays produced
% by LinearClut will have the same chroma as the white in the color table
% that you saved in cal.old.gamma.
%
% See also LinearizeClut, CalibrateScreenLuminance,
% testLuminanceCalibration, testGammaNull, IndexOfLuminance,
% LuminanceOfIndex.
myPath=fileparts(mfilename('fullpath')); % Takes 0.1 s.
addpath(fullfile(fileparts(myPath),'lib')); % Folder in same directory as this is in.

if nargin>0
    cal.screen=screen;
else
    cal.screen=0;
end
if ~exist('Screen','file')
    error('We need the Psychtoolbox. Please add it to the MATLAB path. Available from http://psychtoolbox.org');
end
if ~ismember(cal.screen,Screen('Screens'))
    error('You referred to non-existent screen %d.',cal.screen);
end
screenBufferRect=Screen('Rect',cal.screen);
screenRect=Screen('Rect',cal.screen,1);
% Detect HiDPI mode, e.g. on a Retina display.
% resolution=Screen('Resolution',cal.screen);
cal.hiDPIMultiple=RectWidth(screenRect)/RectWidth(screenBufferRect);
cal.dualResRetinaDisplay=cal.hiDPIMultiple~=1;

computer=Screen('Computer');
[cal.screenWidthMm,cal.screenHeightMm]=Screen('DisplaySize',cal.screen);
if computer.windows
    cal.processUserLongName=getenv('USERNAME');
    cal.localHostName=getenv('USERDOMAIN');
    cal.macModelName=[];
    cal.machineName=''; % DGP August 4, 2019
elseif computer.linux
    cal.processUserLongName=getenv('USER');
    cal.localHostName=strrep(computer.localHostName,'鈄1�7',''''); % work around bug in Screen('Computer')
    cal.osversion=computer.kern.version;
    cal.macModelName=[];
    cal.machineName=''; % DGP August 4, 2019
elseif computer.osx || computer.macintosh
    cal.processUserLongName=computer.processUserLongName;
    cal.localHostName=strrep(computer.localHostName,'鈄1�7',''''); % work around bug in Screen('Computer')
    cal.macModelName=MacModelName;
    cal.machineName='';
end
cal.screenOutput=[]; % only for Linux
cal.ScreenConfigureDisplayBrightnessWorks=true; % default value
cal.brightnessSetting=1.00; % default value
cal.brightnessRMSError=0; % default value
cal.MACAddress=MACAddress; % Use subroutine to read it.
% MACAddress is what MATLAB uses to identify each computer for license
% control.

% Mario says "dacBits" cannot be trusted. We should stop retrieving and
% saving it.
% [savedGamma,cal.dacBits]=Screen('ReadNormalizedGammaTable',cal.screen);
% cal.dacMax=(2^cal.dacBits)-1;

if isempty(cal.macModelName)
    % MATLAB SWITCH fails when given an empty.
    cal.macModelName='undefined';
end

if ~isfield(cal,'datestr')
    % Default values
    cal.screenRect=[0 0 1280 800];
    cal.mfilename='CalibrateScreenLuminance';
    cal.datestr='none';
    cal.notes='none';
    cal.calibratedBy='nobody';
    %    cal.dacBits=10; % From ReadNormalizedGammaTable, unverified.
    %    cal.dacMax=(2^cal.dacBits)-1;
    cal.old.n=[ 0 8 16 24 32 40 48 56 64 72 80 88 96 104 112 120 128 135 143 151 159 167 175 183 191 199 207 215 223 231 239 247 255];
    cal.old.L=[ 1.1 1.2 1.21 1.22 1.3 1.7 2.4 3.7 5.3 7.1 9.6 12.1 15.8 19.5 24.0 29.1 35.8 40.8 48.3 57.1 66.7 77.1 88.0 100.8 114.3 129.5 144.7 162.2 181.0 200.8 223.8 248.5 284.7]; % cd/m^2
end
if streq(cal.macModelName,'MacBookPro9,2') && cal.screen==0 && ...
        streq(cal.machineName,'Tiffany''s MacBook Pro')
    cal.screenRect=[0 0 1280 800];
    cal.mfilename='CalibrateScreenLuminance';
    cal.datestr='23-Mar-2015 19:01:17';
    cal.notes='Tiffany Martin living room lights on. computer screen almost at 90 degree angle sitting on couch';
    cal.calibratedBy='Tiffany Martin';
    %    cal.dacBits=10; % From ReadNormalizedGammaTable, unverified.
    %    cal.dacMax=(2^cal.dacBits)-1;
    cal.old.n=[ 0 8 16 24 32 40 48 56 64 72 80 88 96 104 112 120 128 135 143 151 159 167 175 183 191 199 207 215 223 231 239 247 255];
    cal.old.L=[ 1.3 1.2 1.3 1.5 2.2 3.3 5.5 8.1 12.3 15.9 18.9 24.4 28.5 33.9 41.5 45.9 51.0 59.7 67.6 78.7 86.4 96.3 107.3 116.7 129.8 139.2 151.3 160.5 173.9 185.7 199.5 210.2 225.6]; % cd/m^2
end

% . . .

if streq(MACAddress,'10:9a:dd:61:c7:3d') && streq(const.calibType,'gray')
	% if IsOSX && streq(cal.macModelName,'iMac11,3') && cal.screen==1 ...
	% && cal.screenWidthMm==361 && cal.screenHeightMm==270 ...
	% && streq(cal.localHostName,'jrk')
	cal.OSName='OSX';
	% cal.macModelName='iMac11,3';
	% cal.localHostName='jrk';
	% cal.screen=1;
	% cal.screenWidthMm=361;
	% cal.screenHeightMm=270;
	cal.screenOutput=[]; % used only under Linux
	cal.profile='iMac';
	cal.ScreenConfigureDisplayBrightnessWorks=false;
	cal.BrightnessWorks=true; 	cal.brightnessSetting=1.00;
	cal.brightnessRmsError=0.0000;
	% cal.screenRect=[0 0 1024 768];
	cal.mfilename='CalibrateScreenLuminance';
	cal.datestr='22-Apr-2020 03:42:40';
	cal.photometer='Cambridge Research Systems Colorimeter';
	cal.notes='Lafayette_833_dim';
	cal.calibratedBy='purplab';
	cal.psychImagingOption='EnableNative11BitFramebuffer';
	cal.displayCoreId='R600';
	cal.bitsPerColorComponent=' ';
	cal.old.gammaIndexMax=255;
	cal.old.gammaHistogramStd=0.0231;
	cal.old.G=[ 0 0.0678006 0.116212 0.159273 0.199191 0.236922 0.272998 0.307754 0.341418 0.374155 0.406091 0.437322 0.467927 0.497968 0.527499 0.556563 0.585199 0.60993 0.637847 0.665418 0.692666 0.71961 0.746269 0.772657 0.798789 0.824679 0.850339 0.875778 0.901008 0.926036 0.950873 0.975525 1];
	cal.old.L=[ 0.376151 0.401051 0.489516 0.684691 1.00746 1.49015 2.15228 3.0059 4.07029 5.33348 6.832 8.61098 10.6158 12.8212 15.3637 18.0886 21.1477 23.9541 27.5321 31.3546 35.4343 39.8651 44.6571 49.6739 54.7757 60.4505 66.2534 72.3861 78.6129 85.4525 92.3416 99.625 106.891]; % cd/m^2
	cal.old.n=[ 0 8 16 24 32 40 48 56 64 72 80 88 96 104 112 120 128 135 143 151 159 167 175 183 191 199 207 215 223 231 239 247 255];
	% As explained in "help OurScreenCalibrations", it is useful to have a copy
	% of your screen's default color profile, also known as gamma table, to 
	% restore the Color Lookup Table (CLUT) before you quit a session in which 
	% you modified it. It's also useful for achieving a consistent white balance.
	cal.old.gamma=[0.0000 0.0000 0.0000;0.0135 0.0135 0.0135;0.0231 0.0231 0.0231;0.0316 0.0316 0.0316;0.0396 0.0396 0.0396;...
0.0470 0.0470 0.0470;0.0542 0.0542 0.0542;0.0611 0.0611 0.0611;0.0678 0.0678 0.0678;0.0743 0.0743 0.0743;...
0.0806 0.0806 0.0806;0.0868 0.0868 0.0868;0.0929 0.0929 0.0929;0.0989 0.0989 0.0989;0.1048 0.1048 0.1048;...
0.1105 0.1105 0.1105;0.1162 0.1162 0.1162;0.1218 0.1218 0.1218;0.1274 0.1274 0.1274;0.1328 0.1328 0.1328;...
0.1382 0.1382 0.1382;0.1436 0.1436 0.1436;0.1489 0.1489 0.1489;0.1541 0.1541 0.1541;0.1593 0.1593 0.1593;...
0.1644 0.1644 0.1644;0.1695 0.1695 0.1695;0.1745 0.1745 0.1745;0.1796 0.1796 0.1796;0.1845 0.1845 0.1845;...
0.1894 0.1894 0.1894;0.1943 0.1943 0.1943;0.1992 0.1992 0.1992;0.2040 0.2040 0.2040;0.2088 0.2088 0.2088;...
0.2136 0.2136 0.2136;0.2183 0.2183 0.2183;0.2230 0.2230 0.2230;0.2277 0.2277 0.2277;0.2323 0.2323 0.2323;...
0.2369 0.2369 0.2369;0.2415 0.2415 0.2415;0.2461 0.2461 0.2461;0.2506 0.2506 0.2506;0.2551 0.2551 0.2551;...
0.2596 0.2596 0.2596;0.2641 0.2641 0.2641;0.2686 0.2686 0.2686;0.2730 0.2730 0.2730;0.2774 0.2774 0.2774;...
0.2818 0.2818 0.2818;0.2862 0.2862 0.2862;0.2905 0.2905 0.2905;0.2949 0.2949 0.2949;0.2992 0.2992 0.2992;...
0.3035 0.3035 0.3035;0.3078 0.3078 0.3078;0.3120 0.3120 0.3120;0.3163 0.3163 0.3163;0.3205 0.3205 0.3205;...
0.3247 0.3247 0.3247;0.3289 0.3289 0.3289;0.3331 0.3331 0.3331;0.3373 0.3373 0.3373;0.3414 0.3414 0.3414;...
0.3456 0.3456 0.3456;0.3497 0.3497 0.3497;0.3538 0.3538 0.3538;0.3579 0.3579 0.3579;0.3620 0.3620 0.3620;...
0.3661 0.3661 0.3661;0.3701 0.3701 0.3701;0.3742 0.3742 0.3742;0.3782 0.3782 0.3782;0.3822 0.3822 0.3822;...
0.3862 0.3862 0.3862;0.3902 0.3902 0.3902;0.3942 0.3942 0.3942;0.3982 0.3982 0.3982;0.4021 0.4021 0.4021;...
0.4061 0.4061 0.4061;0.4100 0.4100 0.4100;0.4140 0.4140 0.4140;0.4179 0.4179 0.4179;0.4218 0.4218 0.4218;...
0.4257 0.4257 0.4257;0.4296 0.4296 0.4296;0.4335 0.4335 0.4335;0.4373 0.4373 0.4373;0.4412 0.4412 0.4412;...
0.4450 0.4450 0.4450;0.4489 0.4489 0.4489;0.4527 0.4527 0.4527;0.4565 0.4565 0.4565;0.4603 0.4603 0.4603;...
0.4641 0.4641 0.4641;0.4679 0.4679 0.4679;0.4717 0.4717 0.4717;0.4755 0.4755 0.4755;0.4793 0.4793 0.4793;...
0.4830 0.4830 0.4830;0.4868 0.4868 0.4868;0.4905 0.4905 0.4905;0.4942 0.4942 0.4942;0.4980 0.4980 0.4980;...
0.5017 0.5017 0.5017;0.5054 0.5054 0.5054;0.5091 0.5091 0.5091;0.5128 0.5128 0.5128;0.5165 0.5165 0.5165;...
0.5202 0.5202 0.5202;0.5238 0.5238 0.5238;0.5275 0.5275 0.5275;0.5312 0.5312 0.5312;0.5348 0.5348 0.5348;...
0.5385 0.5385 0.5385;0.5421 0.5421 0.5421;0.5457 0.5457 0.5457;0.5493 0.5493 0.5493;0.5530 0.5530 0.5530;...
0.5566 0.5566 0.5566;0.5602 0.5602 0.5602;0.5638 0.5638 0.5638;0.5674 0.5674 0.5674;0.5709 0.5709 0.5709;...
0.5745 0.5745 0.5745;0.5781 0.5781 0.5781;0.5816 0.5816 0.5816;0.5852 0.5852 0.5852;0.5888 0.5888 0.5888;...
0.5923 0.5923 0.5923;0.5958 0.5958 0.5958;0.5994 0.5994 0.5994;0.6029 0.6029 0.6029;0.6064 0.6064 0.6064;...
0.6099 0.6099 0.6099;0.6134 0.6134 0.6134;0.6169 0.6169 0.6169;0.6204 0.6204 0.6204;0.6239 0.6239 0.6239;...
0.6274 0.6274 0.6274;0.6309 0.6309 0.6309;0.6344 0.6344 0.6344;0.6378 0.6378 0.6378;0.6413 0.6413 0.6413;...
0.6448 0.6448 0.6448;0.6482 0.6482 0.6482;0.6517 0.6517 0.6517;0.6551 0.6551 0.6551;0.6586 0.6586 0.6586;...
0.6620 0.6620 0.6620;0.6654 0.6654 0.6654;0.6688 0.6688 0.6688;0.6723 0.6723 0.6723;0.6757 0.6757 0.6757;...
0.6791 0.6791 0.6791;0.6825 0.6825 0.6825;0.6859 0.6859 0.6859;0.6893 0.6893 0.6893;0.6927 0.6927 0.6927;...
0.6961 0.6961 0.6961;0.6994 0.6994 0.6994;0.7028 0.7028 0.7028;0.7062 0.7062 0.7062;0.7095 0.7095 0.7095;...
0.7129 0.7129 0.7129;0.7163 0.7163 0.7163;0.7196 0.7196 0.7196;0.7230 0.7230 0.7230;0.7263 0.7263 0.7263;...
0.7296 0.7296 0.7296;0.7330 0.7330 0.7330;0.7363 0.7363 0.7363;0.7396 0.7396 0.7396;0.7430 0.7430 0.7430;...
0.7463 0.7463 0.7463;0.7496 0.7496 0.7496;0.7529 0.7529 0.7529;0.7562 0.7562 0.7562;0.7595 0.7595 0.7595;...
0.7628 0.7628 0.7628;0.7661 0.7661 0.7661;0.7694 0.7694 0.7694;0.7727 0.7727 0.7727;0.7759 0.7759 0.7759;...
0.7792 0.7792 0.7792;0.7825 0.7825 0.7825;0.7858 0.7858 0.7858;0.7890 0.7890 0.7890;0.7923 0.7923 0.7923;...
0.7955 0.7955 0.7955;0.7988 0.7988 0.7988;0.8020 0.8020 0.8020;0.8053 0.8053 0.8053;0.8085 0.8085 0.8085;...
0.8118 0.8118 0.8118;0.8150 0.8150 0.8150;0.8182 0.8182 0.8182;0.8215 0.8215 0.8215;0.8247 0.8247 0.8247;...
0.8279 0.8279 0.8279;0.8311 0.8311 0.8311;0.8343 0.8343 0.8343;0.8375 0.8375 0.8375;0.8407 0.8407 0.8407;...
0.8439 0.8439 0.8439;0.8471 0.8471 0.8471;0.8503 0.8503 0.8503;0.8535 0.8535 0.8535;0.8567 0.8567 0.8567;...
0.8599 0.8599 0.8599;0.8631 0.8631 0.8631;0.8663 0.8663 0.8663;0.8694 0.8694 0.8694;0.8726 0.8726 0.8726;...
0.8758 0.8758 0.8758;0.8789 0.8789 0.8789;0.8821 0.8821 0.8821;0.8853 0.8853 0.8853;0.8884 0.8884 0.8884;...
0.8916 0.8916 0.8916;0.8947 0.8947 0.8947;0.8979 0.8979 0.8979;0.9010 0.9010 0.9010;0.9041 0.9041 0.9041;...
0.9073 0.9073 0.9073;0.9104 0.9104 0.9104;0.9135 0.9135 0.9135;0.9167 0.9167 0.9167;0.9198 0.9198 0.9198;...
0.9229 0.9229 0.9229;0.9260 0.9260 0.9260;0.9292 0.9292 0.9292;0.9323 0.9323 0.9323;0.9354 0.9354 0.9354;...
0.9385 0.9385 0.9385;0.9416 0.9416 0.9416;0.9447 0.9447 0.9447;0.9478 0.9478 0.9478;0.9509 0.9509 0.9509;...
0.9540 0.9540 0.9540;0.9571 0.9571 0.9571;0.9601 0.9601 0.9601;0.9632 0.9632 0.9632;0.9663 0.9663 0.9663;...
0.9694 0.9694 0.9694;0.9725 0.9725 0.9725;0.9755 0.9755 0.9755;0.9786 0.9786 0.9786;0.9817 0.9817 0.9817;...
0.9847 0.9847 0.9847;0.9878 0.9878 0.9878;0.9908 0.9908 0.9908;0.9939 0.9939 0.9939;0.9970 0.9970 0.9970;...
1.0000 1.0000 1.0000;];
end
if streq(MACAddress,'10:9a:dd:61:c7:3d') && streq(const.calibType,'rgb')
	% if IsOSX && streq(cal.macModelName,'iMac11,3') && cal.screen==1 ...
	% && cal.screenWidthMm==361 && cal.screenHeightMm==270 ...
	% && streq(cal.localHostName,'jrk')
	cal.OSName='OSX';
	% cal.macModelName='iMac11,3';
	% cal.localHostName='jrk';
	% cal.screen=1;
	% cal.screenWidthMm=361;
	% cal.screenHeightMm=270;
	cal.screenOutput=[]; % used only under Linux
	cal.profile='iMac';
	cal.ScreenConfigureDisplayBrightnessWorks=false;
	cal.BrightnessWorks=true; 	cal.brightnessSetting=0.00;
	cal.brightnessRmsError=0.0000;
	% cal.screenRect=[0 0 1024 768];
	cal.mfilename='CalibrateScreenLuminance';
	cal.datestr='24-Apr-2020 23:59:35';
	cal.photometer='Cambridge Research Systems Colorimeter';
	cal.notes='Lafayette_833_dim';
	cal.caliMode='rgb';
	% WARNING: The luminance function cal.old.L is not monotonic.
	cal.calibratedBy='purplab';
	cal.psychImagingOption='EnableNative11BitFramebuffer';
	cal.displayCoreId='R600';
	cal.bitsPerColorComponent=' ';
	cal.old.gammaIndexMax=255;
	cal.old.gammaHistogramStd=0.0231;
	cal.old.G=[ 0 0.0678006 0.116212 0.159273 0.199191 0.236922 0.272998 0.307754 0.341418 0.374155 0.406091 0.437322 0.467927 0.497968 0.527499 0.556563 0.585199 0.60993 0.637847 0.665418 0.692666 0.71961 0.746269 0.772657 0.798789 0.824679 0.850339 0.875778 0.901008 0.926036 0.950873 0.975525 1];
	cal.old.L=[0.315221 0.330899 0.349311 0.395984 0.473715 0.581814 0.710468 0.892576 1.097973 1.342829 1.644500 1.989352 2.385948 2.822860 3.315369 3.854912 4.449330 5.001686 5.694124 6.444893 7.248164 8.113389 9.063099 10.024273 11.040647 12.143974 13.286268 14.483401 15.724112 17.034582 18.397915 19.828309 21.248624;...
0.324673 0.342327 0.398709 0.528437 0.750938 1.099544 1.562561 2.166206 2.924939 3.837077 4.901402 6.173935 7.596945 9.176586 10.981859 12.957564 15.128601 17.172874 19.719456 22.488539 25.435796 28.629989 32.094042 35.720857 39.475257 43.548193 47.763503 52.228384 56.830798 61.733372 66.765674 72.093886 77.349050;...
0.318483 0.335050 0.357415 0.397994 0.456557 0.524708 0.628231 0.754877 0.903658 1.081161 1.289493 1.513901 1.790415 2.074604 2.408233 2.756652 3.161919 3.526147 3.986521 4.479272 5.003908 5.579761 6.194944 6.828341 7.483413 8.186179 8.923627 9.693718 10.516673 11.362323 12.241604 13.145226 14.045455;]; % cd/m^2
	cal.old.n=[ 0 8 16 24 32 40 48 56 64 72 80 88 96 104 112 120 128 135 143 151 159 167 175 183 191 199 207 215 223 231 239 247 255];
	% As explained in "help OurScreenCalibrations", it is useful to have a copy
	% of your screen's default color profile, also known as gamma table, to 
	% restore the Color Lookup Table (CLUT) before you quit a session in which 
	% you modified it. It's also useful for achieving a consistent white balance.
	cal.old.gamma=[0.0000 0.0000 0.0000;0.0135 0.0135 0.0135;0.0231 0.0231 0.0231;0.0316 0.0316 0.0316;0.0396 0.0396 0.0396;...
0.0470 0.0470 0.0470;0.0542 0.0542 0.0542;0.0611 0.0611 0.0611;0.0678 0.0678 0.0678;0.0743 0.0743 0.0743;...
0.0806 0.0806 0.0806;0.0868 0.0868 0.0868;0.0929 0.0929 0.0929;0.0989 0.0989 0.0989;0.1048 0.1048 0.1048;...
0.1105 0.1105 0.1105;0.1162 0.1162 0.1162;0.1218 0.1218 0.1218;0.1274 0.1274 0.1274;0.1328 0.1328 0.1328;...
0.1382 0.1382 0.1382;0.1436 0.1436 0.1436;0.1489 0.1489 0.1489;0.1541 0.1541 0.1541;0.1593 0.1593 0.1593;...
0.1644 0.1644 0.1644;0.1695 0.1695 0.1695;0.1745 0.1745 0.1745;0.1796 0.1796 0.1796;0.1845 0.1845 0.1845;...
0.1894 0.1894 0.1894;0.1943 0.1943 0.1943;0.1992 0.1992 0.1992;0.2040 0.2040 0.2040;0.2088 0.2088 0.2088;...
0.2136 0.2136 0.2136;0.2183 0.2183 0.2183;0.2230 0.2230 0.2230;0.2277 0.2277 0.2277;0.2323 0.2323 0.2323;...
0.2369 0.2369 0.2369;0.2415 0.2415 0.2415;0.2461 0.2461 0.2461;0.2506 0.2506 0.2506;0.2551 0.2551 0.2551;...
0.2596 0.2596 0.2596;0.2641 0.2641 0.2641;0.2686 0.2686 0.2686;0.2730 0.2730 0.2730;0.2774 0.2774 0.2774;...
0.2818 0.2818 0.2818;0.2862 0.2862 0.2862;0.2905 0.2905 0.2905;0.2949 0.2949 0.2949;0.2992 0.2992 0.2992;...
0.3035 0.3035 0.3035;0.3078 0.3078 0.3078;0.3120 0.3120 0.3120;0.3163 0.3163 0.3163;0.3205 0.3205 0.3205;...
0.3247 0.3247 0.3247;0.3289 0.3289 0.3289;0.3331 0.3331 0.3331;0.3373 0.3373 0.3373;0.3414 0.3414 0.3414;...
0.3456 0.3456 0.3456;0.3497 0.3497 0.3497;0.3538 0.3538 0.3538;0.3579 0.3579 0.3579;0.3620 0.3620 0.3620;...
0.3661 0.3661 0.3661;0.3701 0.3701 0.3701;0.3742 0.3742 0.3742;0.3782 0.3782 0.3782;0.3822 0.3822 0.3822;...
0.3862 0.3862 0.3862;0.3902 0.3902 0.3902;0.3942 0.3942 0.3942;0.3982 0.3982 0.3982;0.4021 0.4021 0.4021;...
0.4061 0.4061 0.4061;0.4100 0.4100 0.4100;0.4140 0.4140 0.4140;0.4179 0.4179 0.4179;0.4218 0.4218 0.4218;...
0.4257 0.4257 0.4257;0.4296 0.4296 0.4296;0.4335 0.4335 0.4335;0.4373 0.4373 0.4373;0.4412 0.4412 0.4412;...
0.4450 0.4450 0.4450;0.4489 0.4489 0.4489;0.4527 0.4527 0.4527;0.4565 0.4565 0.4565;0.4603 0.4603 0.4603;...
0.4641 0.4641 0.4641;0.4679 0.4679 0.4679;0.4717 0.4717 0.4717;0.4755 0.4755 0.4755;0.4793 0.4793 0.4793;...
0.4830 0.4830 0.4830;0.4868 0.4868 0.4868;0.4905 0.4905 0.4905;0.4942 0.4942 0.4942;0.4980 0.4980 0.4980;...
0.5017 0.5017 0.5017;0.5054 0.5054 0.5054;0.5091 0.5091 0.5091;0.5128 0.5128 0.5128;0.5165 0.5165 0.5165;...
0.5202 0.5202 0.5202;0.5238 0.5238 0.5238;0.5275 0.5275 0.5275;0.5312 0.5312 0.5312;0.5348 0.5348 0.5348;...
0.5385 0.5385 0.5385;0.5421 0.5421 0.5421;0.5457 0.5457 0.5457;0.5493 0.5493 0.5493;0.5530 0.5530 0.5530;...
0.5566 0.5566 0.5566;0.5602 0.5602 0.5602;0.5638 0.5638 0.5638;0.5674 0.5674 0.5674;0.5709 0.5709 0.5709;...
0.5745 0.5745 0.5745;0.5781 0.5781 0.5781;0.5816 0.5816 0.5816;0.5852 0.5852 0.5852;0.5888 0.5888 0.5888;...
0.5923 0.5923 0.5923;0.5958 0.5958 0.5958;0.5994 0.5994 0.5994;0.6029 0.6029 0.6029;0.6064 0.6064 0.6064;...
0.6099 0.6099 0.6099;0.6134 0.6134 0.6134;0.6169 0.6169 0.6169;0.6204 0.6204 0.6204;0.6239 0.6239 0.6239;...
0.6274 0.6274 0.6274;0.6309 0.6309 0.6309;0.6344 0.6344 0.6344;0.6378 0.6378 0.6378;0.6413 0.6413 0.6413;...
0.6448 0.6448 0.6448;0.6482 0.6482 0.6482;0.6517 0.6517 0.6517;0.6551 0.6551 0.6551;0.6586 0.6586 0.6586;...
0.6620 0.6620 0.6620;0.6654 0.6654 0.6654;0.6688 0.6688 0.6688;0.6723 0.6723 0.6723;0.6757 0.6757 0.6757;...
0.6791 0.6791 0.6791;0.6825 0.6825 0.6825;0.6859 0.6859 0.6859;0.6893 0.6893 0.6893;0.6927 0.6927 0.6927;...
0.6961 0.6961 0.6961;0.6994 0.6994 0.6994;0.7028 0.7028 0.7028;0.7062 0.7062 0.7062;0.7095 0.7095 0.7095;...
0.7129 0.7129 0.7129;0.7163 0.7163 0.7163;0.7196 0.7196 0.7196;0.7230 0.7230 0.7230;0.7263 0.7263 0.7263;...
0.7296 0.7296 0.7296;0.7330 0.7330 0.7330;0.7363 0.7363 0.7363;0.7396 0.7396 0.7396;0.7430 0.7430 0.7430;...
0.7463 0.7463 0.7463;0.7496 0.7496 0.7496;0.7529 0.7529 0.7529;0.7562 0.7562 0.7562;0.7595 0.7595 0.7595;...
0.7628 0.7628 0.7628;0.7661 0.7661 0.7661;0.7694 0.7694 0.7694;0.7727 0.7727 0.7727;0.7759 0.7759 0.7759;...
0.7792 0.7792 0.7792;0.7825 0.7825 0.7825;0.7858 0.7858 0.7858;0.7890 0.7890 0.7890;0.7923 0.7923 0.7923;...
0.7955 0.7955 0.7955;0.7988 0.7988 0.7988;0.8020 0.8020 0.8020;0.8053 0.8053 0.8053;0.8085 0.8085 0.8085;...
0.8118 0.8118 0.8118;0.8150 0.8150 0.8150;0.8182 0.8182 0.8182;0.8215 0.8215 0.8215;0.8247 0.8247 0.8247;...
0.8279 0.8279 0.8279;0.8311 0.8311 0.8311;0.8343 0.8343 0.8343;0.8375 0.8375 0.8375;0.8407 0.8407 0.8407;...
0.8439 0.8439 0.8439;0.8471 0.8471 0.8471;0.8503 0.8503 0.8503;0.8535 0.8535 0.8535;0.8567 0.8567 0.8567;...
0.8599 0.8599 0.8599;0.8631 0.8631 0.8631;0.8663 0.8663 0.8663;0.8694 0.8694 0.8694;0.8726 0.8726 0.8726;...
0.8758 0.8758 0.8758;0.8789 0.8789 0.8789;0.8821 0.8821 0.8821;0.8853 0.8853 0.8853;0.8884 0.8884 0.8884;...
0.8916 0.8916 0.8916;0.8947 0.8947 0.8947;0.8979 0.8979 0.8979;0.9010 0.9010 0.9010;0.9041 0.9041 0.9041;...
0.9073 0.9073 0.9073;0.9104 0.9104 0.9104;0.9135 0.9135 0.9135;0.9167 0.9167 0.9167;0.9198 0.9198 0.9198;...
0.9229 0.9229 0.9229;0.9260 0.9260 0.9260;0.9292 0.9292 0.9292;0.9323 0.9323 0.9323;0.9354 0.9354 0.9354;...
0.9385 0.9385 0.9385;0.9416 0.9416 0.9416;0.9447 0.9447 0.9447;0.9478 0.9478 0.9478;0.9509 0.9509 0.9509;...
0.9540 0.9540 0.9540;0.9571 0.9571 0.9571;0.9601 0.9601 0.9601;0.9632 0.9632 0.9632;0.9663 0.9663 0.9663;...
0.9694 0.9694 0.9694;0.9725 0.9725 0.9725;0.9755 0.9755 0.9755;0.9786 0.9786 0.9786;0.9817 0.9817 0.9817;...
0.9847 0.9847 0.9847;0.9878 0.9878 0.9878;0.9908 0.9908 0.9908;0.9939 0.9939 0.9939;0.9970 0.9970 0.9970;...
1.0000 1.0000 1.0000;];
end
if streq(MACAddress,'10:9a:dd:61:c7:3d') && streq(const.calibType,'rgba')
	% if IsOSX && streq(cal.macModelName,'iMac11,3') && cal.screen==1 ...
	% && cal.screenWidthMm==361 && cal.screenHeightMm==270 ...
	% && streq(cal.localHostName,'jrk')
	cal.OSName='OSX';
	% cal.macModelName='iMac11,3';
	% cal.localHostName='jrk';
	% cal.screen=1;
	% cal.screenWidthMm=361;
	% cal.screenHeightMm=270;
	cal.screenOutput=[]; % used only under Linux
	cal.profile='iMac';
	cal.ScreenConfigureDisplayBrightnessWorks=false;
	cal.BrightnessWorks=true; 	cal.brightnessSetting=0.00;
	cal.brightnessRmsError=0.0000;
	% cal.screenRect=[0 0 1024 768];
	cal.mfilename='CalibrateScreenLuminance';
	cal.datestr='25-Apr-2020 00:31:04';
	cal.photometer='Cambridge Research Systems Colorimeter';
	cal.notes='first rgba';
	cal.caliMode='rgba';
	cal.calibratedBy='purplab';
	cal.psychImagingOption='EnableNative11BitFramebuffer';
	cal.displayCoreId='R600';
	cal.bitsPerColorComponent=' ';
	cal.old.gammaIndexMax=255;
	cal.old.gammaHistogramStd=0.0231;
	cal.old.G=[ 0 0.0678006 0.116212 0.159273 0.199191 0.236922 0.272998 0.307754 0.341418 0.374155 0.406091 0.437322 0.467927 0.497968 0.527499 0.556563 0.585199 0.60993 0.637847 0.665418 0.692666 0.71961 0.746269 0.772657 0.798789 0.824679 0.850339 0.875778 0.901008 0.926036 0.950873 0.975525 1];
	cal.old.L=[0.324312 0.333994 0.357283 0.413999 0.492488 0.600226 0.743173 0.909242 1.134928 1.390323 1.700097 2.057762 2.466941 2.920122 3.436281 3.986300 4.602225 5.181556 5.900509 6.680527 7.519007 8.409497 9.390793 10.390140 11.442747 12.582898 13.765508 15.016492 16.306443 17.661082 19.073822 20.555599 22.022420;...
0.342097 0.349902 0.405066 0.543357 0.774552 1.119305 1.593520 2.203522 2.978754 3.896491 4.996088 6.265296 7.737474 9.340138 11.179925 13.168574 15.399255 17.481435 20.064408 22.868930 25.859756 29.110038 32.650861 36.321773 40.163284 44.302451 48.559751 53.092018 57.780785 62.778406 67.917413 73.335010 78.662595;...
0.347696 0.355700 0.376188 0.415021 0.477834 0.550957 0.649409 0.784388 0.928856 1.109454 1.316568 1.561856 1.834549 2.132837 2.459022 2.818639 3.228057 3.605888 4.076373 4.568073 5.103907 5.674590 6.299424 6.947182 7.640689 8.350602 9.105804 9.895724 10.707811 11.558830 12.457940 13.373618 14.278657;...
0.331657 0.377437 0.484675 0.686207 1.056597 1.584548 2.313304 3.213454 4.341515 5.660961 7.275966 9.130802 11.222081 13.546834 16.185689 19.026008 22.213265 25.131013 28.813150 32.762621 36.984001 41.561410 46.507097 51.658859 56.926124 62.800217 68.743077 75.031986 81.449933 88.486727 95.558933 103.058863 110.483827;]; % cd/m^2
	cal.old.n=[ 0 8 16 24 32 40 48 56 64 72 80 88 96 104 112 120 128 135 143 151 159 167 175 183 191 199 207 215 223 231 239 247 255];
	% As explained in "help OurScreenCalibrations", it is useful to have a copy
	% of your screen's default color profile, also known as gamma table, to 
	% restore the Color Lookup Table (CLUT) before you quit a session in which 
	% you modified it. It's also useful for achieving a consistent white balance.
	cal.old.gamma=[0.0000 0.0000 0.0000;0.0135 0.0135 0.0135;0.0231 0.0231 0.0231;0.0316 0.0316 0.0316;0.0396 0.0396 0.0396;...
0.0470 0.0470 0.0470;0.0542 0.0542 0.0542;0.0611 0.0611 0.0611;0.0678 0.0678 0.0678;0.0743 0.0743 0.0743;...
0.0806 0.0806 0.0806;0.0868 0.0868 0.0868;0.0929 0.0929 0.0929;0.0989 0.0989 0.0989;0.1048 0.1048 0.1048;...
0.1105 0.1105 0.1105;0.1162 0.1162 0.1162;0.1218 0.1218 0.1218;0.1274 0.1274 0.1274;0.1328 0.1328 0.1328;...
0.1382 0.1382 0.1382;0.1436 0.1436 0.1436;0.1489 0.1489 0.1489;0.1541 0.1541 0.1541;0.1593 0.1593 0.1593;...
0.1644 0.1644 0.1644;0.1695 0.1695 0.1695;0.1745 0.1745 0.1745;0.1796 0.1796 0.1796;0.1845 0.1845 0.1845;...
0.1894 0.1894 0.1894;0.1943 0.1943 0.1943;0.1992 0.1992 0.1992;0.2040 0.2040 0.2040;0.2088 0.2088 0.2088;...
0.2136 0.2136 0.2136;0.2183 0.2183 0.2183;0.2230 0.2230 0.2230;0.2277 0.2277 0.2277;0.2323 0.2323 0.2323;...
0.2369 0.2369 0.2369;0.2415 0.2415 0.2415;0.2461 0.2461 0.2461;0.2506 0.2506 0.2506;0.2551 0.2551 0.2551;...
0.2596 0.2596 0.2596;0.2641 0.2641 0.2641;0.2686 0.2686 0.2686;0.2730 0.2730 0.2730;0.2774 0.2774 0.2774;...
0.2818 0.2818 0.2818;0.2862 0.2862 0.2862;0.2905 0.2905 0.2905;0.2949 0.2949 0.2949;0.2992 0.2992 0.2992;...
0.3035 0.3035 0.3035;0.3078 0.3078 0.3078;0.3120 0.3120 0.3120;0.3163 0.3163 0.3163;0.3205 0.3205 0.3205;...
0.3247 0.3247 0.3247;0.3289 0.3289 0.3289;0.3331 0.3331 0.3331;0.3373 0.3373 0.3373;0.3414 0.3414 0.3414;...
0.3456 0.3456 0.3456;0.3497 0.3497 0.3497;0.3538 0.3538 0.3538;0.3579 0.3579 0.3579;0.3620 0.3620 0.3620;...
0.3661 0.3661 0.3661;0.3701 0.3701 0.3701;0.3742 0.3742 0.3742;0.3782 0.3782 0.3782;0.3822 0.3822 0.3822;...
0.3862 0.3862 0.3862;0.3902 0.3902 0.3902;0.3942 0.3942 0.3942;0.3982 0.3982 0.3982;0.4021 0.4021 0.4021;...
0.4061 0.4061 0.4061;0.4100 0.4100 0.4100;0.4140 0.4140 0.4140;0.4179 0.4179 0.4179;0.4218 0.4218 0.4218;...
0.4257 0.4257 0.4257;0.4296 0.4296 0.4296;0.4335 0.4335 0.4335;0.4373 0.4373 0.4373;0.4412 0.4412 0.4412;...
0.4450 0.4450 0.4450;0.4489 0.4489 0.4489;0.4527 0.4527 0.4527;0.4565 0.4565 0.4565;0.4603 0.4603 0.4603;...
0.4641 0.4641 0.4641;0.4679 0.4679 0.4679;0.4717 0.4717 0.4717;0.4755 0.4755 0.4755;0.4793 0.4793 0.4793;...
0.4830 0.4830 0.4830;0.4868 0.4868 0.4868;0.4905 0.4905 0.4905;0.4942 0.4942 0.4942;0.4980 0.4980 0.4980;...
0.5017 0.5017 0.5017;0.5054 0.5054 0.5054;0.5091 0.5091 0.5091;0.5128 0.5128 0.5128;0.5165 0.5165 0.5165;...
0.5202 0.5202 0.5202;0.5238 0.5238 0.5238;0.5275 0.5275 0.5275;0.5312 0.5312 0.5312;0.5348 0.5348 0.5348;...
0.5385 0.5385 0.5385;0.5421 0.5421 0.5421;0.5457 0.5457 0.5457;0.5493 0.5493 0.5493;0.5530 0.5530 0.5530;...
0.5566 0.5566 0.5566;0.5602 0.5602 0.5602;0.5638 0.5638 0.5638;0.5674 0.5674 0.5674;0.5709 0.5709 0.5709;...
0.5745 0.5745 0.5745;0.5781 0.5781 0.5781;0.5816 0.5816 0.5816;0.5852 0.5852 0.5852;0.5888 0.5888 0.5888;...
0.5923 0.5923 0.5923;0.5958 0.5958 0.5958;0.5994 0.5994 0.5994;0.6029 0.6029 0.6029;0.6064 0.6064 0.6064;...
0.6099 0.6099 0.6099;0.6134 0.6134 0.6134;0.6169 0.6169 0.6169;0.6204 0.6204 0.6204;0.6239 0.6239 0.6239;...
0.6274 0.6274 0.6274;0.6309 0.6309 0.6309;0.6344 0.6344 0.6344;0.6378 0.6378 0.6378;0.6413 0.6413 0.6413;...
0.6448 0.6448 0.6448;0.6482 0.6482 0.6482;0.6517 0.6517 0.6517;0.6551 0.6551 0.6551;0.6586 0.6586 0.6586;...
0.6620 0.6620 0.6620;0.6654 0.6654 0.6654;0.6688 0.6688 0.6688;0.6723 0.6723 0.6723;0.6757 0.6757 0.6757;...
0.6791 0.6791 0.6791;0.6825 0.6825 0.6825;0.6859 0.6859 0.6859;0.6893 0.6893 0.6893;0.6927 0.6927 0.6927;...
0.6961 0.6961 0.6961;0.6994 0.6994 0.6994;0.7028 0.7028 0.7028;0.7062 0.7062 0.7062;0.7095 0.7095 0.7095;...
0.7129 0.7129 0.7129;0.7163 0.7163 0.7163;0.7196 0.7196 0.7196;0.7230 0.7230 0.7230;0.7263 0.7263 0.7263;...
0.7296 0.7296 0.7296;0.7330 0.7330 0.7330;0.7363 0.7363 0.7363;0.7396 0.7396 0.7396;0.7430 0.7430 0.7430;...
0.7463 0.7463 0.7463;0.7496 0.7496 0.7496;0.7529 0.7529 0.7529;0.7562 0.7562 0.7562;0.7595 0.7595 0.7595;...
0.7628 0.7628 0.7628;0.7661 0.7661 0.7661;0.7694 0.7694 0.7694;0.7727 0.7727 0.7727;0.7759 0.7759 0.7759;...
0.7792 0.7792 0.7792;0.7825 0.7825 0.7825;0.7858 0.7858 0.7858;0.7890 0.7890 0.7890;0.7923 0.7923 0.7923;...
0.7955 0.7955 0.7955;0.7988 0.7988 0.7988;0.8020 0.8020 0.8020;0.8053 0.8053 0.8053;0.8085 0.8085 0.8085;...
0.8118 0.8118 0.8118;0.8150 0.8150 0.8150;0.8182 0.8182 0.8182;0.8215 0.8215 0.8215;0.8247 0.8247 0.8247;...
0.8279 0.8279 0.8279;0.8311 0.8311 0.8311;0.8343 0.8343 0.8343;0.8375 0.8375 0.8375;0.8407 0.8407 0.8407;...
0.8439 0.8439 0.8439;0.8471 0.8471 0.8471;0.8503 0.8503 0.8503;0.8535 0.8535 0.8535;0.8567 0.8567 0.8567;...
0.8599 0.8599 0.8599;0.8631 0.8631 0.8631;0.8663 0.8663 0.8663;0.8694 0.8694 0.8694;0.8726 0.8726 0.8726;...
0.8758 0.8758 0.8758;0.8789 0.8789 0.8789;0.8821 0.8821 0.8821;0.8853 0.8853 0.8853;0.8884 0.8884 0.8884;...
0.8916 0.8916 0.8916;0.8947 0.8947 0.8947;0.8979 0.8979 0.8979;0.9010 0.9010 0.9010;0.9041 0.9041 0.9041;...
0.9073 0.9073 0.9073;0.9104 0.9104 0.9104;0.9135 0.9135 0.9135;0.9167 0.9167 0.9167;0.9198 0.9198 0.9198;...
0.9229 0.9229 0.9229;0.9260 0.9260 0.9260;0.9292 0.9292 0.9292;0.9323 0.9323 0.9323;0.9354 0.9354 0.9354;...
0.9385 0.9385 0.9385;0.9416 0.9416 0.9416;0.9447 0.9447 0.9447;0.9478 0.9478 0.9478;0.9509 0.9509 0.9509;...
0.9540 0.9540 0.9540;0.9571 0.9571 0.9571;0.9601 0.9601 0.9601;0.9632 0.9632 0.9632;0.9663 0.9663 0.9663;...
0.9694 0.9694 0.9694;0.9725 0.9725 0.9725;0.9755 0.9755 0.9755;0.9786 0.9786 0.9786;0.9817 0.9817 0.9817;...
0.9847 0.9847 0.9847;0.9878 0.9878 0.9878;0.9908 0.9908 0.9908;0.9939 0.9939 0.9939;0.9970 0.9970 0.9970;...
1.0000 1.0000 1.0000;];
end
